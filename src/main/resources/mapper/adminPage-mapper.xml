<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="adminPageMapper">
	
	<resultMap type="Member" id="MemberResultSet">
		<id property="userId" column="user_id"/>
		<result property="userPwd" column="user_pwd"/>
		<result property="userName" column="user_name"/>
		<result property="birth" column="birth"/>
		<result property="postalCode" column="postal_code"/>
		<result property="bAddress" column="b_address"/>
		<result property="lAddress" column="l_address"/>
		<result property="email" column="email"/>
		<result property="phone" column="phone"/>
		<result property="gender" column="gender"/>
		<result property="donation" column="donation"/>
		<result property="revenue" column="revenue"/>
		<result property="division" column="division"/>
		<result property="status" column="status"/>
	</resultMap>
	
	<resultMap type="Event" id="eventResultSet">
		<id property="eNum" column="e_num"/>
		<result property="eTitle" column="e_title"/>
		<result property="eStart" column="e_start"/>
		<result property="eEnd" column="e_end"/>
		<result property="eAnno" column="e_anno"/>
		<result property="eTarget" column="e_target"/>
		<result property="eContent" column="e_content"/>
		<result property="eWay" column="e_way"/>
		<result property="eStand" column="e_stand"/>
		<result property="eDate" column="e_date"/>
		<result property="eCount" column="e_count"/>
		<result property="eStatus" column="e_status"/>
		<result property="eDivision" column="e_division"/>
		<result property="eEventNum" column="e_eventnum"/>
		<result property="originName" column="origin_name"/>
		<result property="changeName" column="change_name"/>
		<result property="imPath" column="im_path"/>
	</resultMap>
	
	<select id="selectUserList" resultMap="MemberResultSet">
		select *
		from member
		where status = 'Y'
		order by regexp_replace(user_id, '[0-9]'), to_number(regexp_replace(user_id, '[^0-9]')) asc
	</select>
	
	<select id="selectUserSearch" parameterType="string" resultMap="MemberResultSet">
		select *
		from member
		where status='Y'and user_id like '%' || #{userId} || '%'
		order by regexp_replace(user_id, '[0-9]'), to_number(regexp_replace(user_id, '[^0-9]')) asc
	</select>
	
	<select id="selectUserInfo" resultMap="MemberResultSet">
		<!-- 후원, 리더랑 join 수정해야함! -->
		select *
		from member
		where status='Y' and user_id = #{userId}
	</select>
	
	<resultMap type="Admin" id="AdminSet">
		<id property="userId" column="AD_id"/>
		<result property="userPwd" column="ad_pwd"/>
		<result property="userName" column="ad_name"/>
	</resultMap>
	
	<select id="adminLogin" resultMap="AdminSet">
		select *
		from admin
		where ad_id = #{userId} and ad_pwd = #{userPwd}
	</select>
	
	<select id="eventWinnerList" resultMap="eventResultSet">
		select *
		from event
		order by e_num desc
	</select>
	
	<select id="eventIngList" resultMap="eventResultSet">
		select *
		from event
		where e_division = 1
		order by e_num desc
	</select>
	
	<select id="eventEndList" resultMap="eventResultSet">
		select *
		from event
		where e_division = 2
		order by e_num desc
	</select>
	
	
	
</mapper>